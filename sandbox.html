<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JS</title>
  <script type="module">

var View = function () {};
View.prototype = {
  templatePath: null,
  init: async function () {
    if (!View.prototype._templateHtmlPromise) {
      View.prototype._templateHtmlPromise = (async () => {
        const response = await fetch(this.templatePath);
        View.prototype.templateHtml = await response.text();
        return View.prototype.templateHtml;
      })();
    }
    await View.prototype._templateHtmlPromise;
  }
};

View.create = async function (SubClass, ...args) {
  const instance = new SubClass(...args)
  await instance.init(); 
  return instance;
};

var MenuView = function () {
  this.templatePath = 'modules/menu/menu.html';
};
MenuView.prototype = new View();

async function initViews() {
  menuViewInstance = await View.create(MenuView);
}

let menuViewInstance = null;
await initViews();
console.log('111', menuViewInstance.templateHtml); // Гарантированно определено
setTimeout(() => {
  console.log('222', menuViewInstance.templateHtml);
}, 5000);



  </script>
</head>

<body></body>

</html>